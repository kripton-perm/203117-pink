"use strict";var gulp=require("gulp"),sass=require("gulp-sass"),plumber=require("gulp-plumber"),postcss=require("gulp-postcss"),autoprefixer=require("autoprefixer"),minify=require("gulp-csso"),rename=require("gulp-rename"),imagemin=require("gulp-imagemin"),webp=require("gulp-webp"),svgstore=require("gulp-svgstore"),posthtml=require("gulp-posthtml"),include=require("posthtml-include"),server=require("browser-sync").create(),run=require("run-sequence"),del=require("del"),htmlmin=require("gulp-htmlmin");gulp.task("style",function(){gulp.src("sass/style.scss").pipe(plumber()).pipe(sass()).pipe(postcss([autoprefixer()])).pipe(gulp.dest("build/css")).pipe(minify()).pipe(rename("style.min.css")).pipe(gulp.dest("build/css")).pipe(server.stream())}),gulp.task("sprite",function(){return gulp.src("img/sprite/*.svg").pipe(svgstore({inlineSvg:!0})).pipe(rename("sprite.svg")).pipe(gulp.dest("build/img"))}),gulp.task("html",function(){return gulp.src("*.html").pipe(posthtml([include()])).pipe(htmlmin({collapseWhitespace:!0})).pipe(gulp.dest("build")).pipe(server.stream())}),gulp.task("images",function(){return gulp.src(["build/img/*.{png,jpg,svg}","img/images/background/*.{png,jpg,svg}","img/images/logo/*.{png,jpg,svg}","img/images/pictures/*.{png,jpg,svg}"]).pipe(imagemin([imagemin.optipng({optimizationLevel:3}),imagemin.jpegtran({progressive:!0}),imagemin.svgo()])).pipe(gulp.dest("build/img"))}),gulp.task("webp",function(){return gulp.src("img/images/pictures/*.{png,jpg}").pipe(webp({quality:90})).pipe(gulp.dest("build/img"))}),gulp.task("serve",function(){server.init({server:"build/",notify:!1,open:!1,cors:!0,ui:!1}),gulp.watch("sass/**/*.{scss,sass}",["style"]),gulp.watch("*.html",["html"])}),gulp.task("copy",function(){return gulp.src(["fonts/**/*.{woff,woff2}","pp/**","js/**"],{base:"."}).pipe(gulp.dest("build"))}),gulp.task("clean",function(){return del("build")}),gulp.task("build",function(e){run("clean","copy","style","webp","images","sprite","html",e)});